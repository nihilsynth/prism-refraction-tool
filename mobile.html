<!doctype html>
<html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Prism Refraction (Exact Reference)</title>
<style>
body{font-family:Arial,sans-serif;margin:0;background:#fff;padding:10px}
.wrap{max-width:860px;margin:0 auto}
h2{margin:0 0 6px;font-size:1.1rem}.muted{font-size:12px;color:#555;margin:0 0 10px}
img{width:100%;height:auto;border:1px solid #ddd;border-radius:6px;display:block}
.panel{margin-top:10px;border:1px solid #ddd;border-radius:6px;padding:10px}
.row{display:grid;grid-template-columns:1fr 120px;gap:10px;align-items:center;margin:8px 0}
input{width:100%;padding:8px;border:1px solid #aaa;border-radius:6px;font-size:16px}
input.calc{background:#eef8ee;font-weight:700}
button{width:100%;padding:10px;border:0;border-radius:8px;background:#1457d5;color:#fff;font-weight:700;font-size:16px;margin-top:8px}
button.secondary{background:#777}
.msg{margin-top:10px;padding:8px;border-radius:6px;display:none}.ok{background:#e8f7e8;border-left:4px solid #2f9b3f}.err{background:#ffeaea;border-left:4px solid #cf2f2f}
@media(max-width:640px){.row{grid-template-columns:1fr}}
</style></head><body><div class="wrap">
<h2>Prism Refraction Solver (exact diagram reference)</h2>
<p class="muted">Using your exact uploaded diagram image; formulas/values below cross-reference i₁, r₁, r₂, i₂, d₁, d₂, A, n/n′.</p>
<img src="diagram-reference.png" alt="Reference prism diagram">
<div class="panel"><div><b>Equations:</b> 1) sin(i₁)=n·sin(r₁)  2) A=r₁+r₂  3) n·sin(r₂)=sin(i₂)  4) δ=i₁+i₂−A</div></div>
<div class="panel">
<div class="row"><label>i₁ (°)</label><input id="i1" type="number" step="0.01" placeholder="40"></div>
<div class="row"><label>A (°)</label><input id="A" type="number" step="0.01" placeholder="50"></div>
<div class="row"><label>n</label><input id="n" type="number" step="0.001" placeholder="1.58"></div><hr>
<div class="row"><label>r₁ (°)</label><input id="r1" readonly></div>
<div class="row"><label>r₂ (°)</label><input id="r2" readonly></div>
<div class="row"><label>i₂ (°)</label><input id="i2" readonly></div>
<div class="row"><label>δ (°)</label><input id="D" readonly></div>
<button onclick="solve()">Update</button><button class="secondary" onclick="resetAll()">Reset</button>
<div id="ok" class="msg ok"></div><div id="err" class="msg err"></div>
</div></div>
<script>
const by=id=>document.getElementById(id),rad=d=>d*Math.PI/180,deg=r=>r*180/Math.PI;
function setv(id,v){const e=by(id);e.value=Number(v).toFixed(2);e.classList.add('calc')} function clear(){['r1','r2','i2','D'].forEach(k=>{by(k).value='';by(k).classList.remove('calc')});by('ok').style.display='none';by('err').style.display='none'}
function show(id,t){by(id).textContent=t;by(id).style.display='block'}
function solve(){clear();const i1=parseFloat(by('i1').value),A=parseFloat(by('A').value),n=parseFloat(by('n').value);if([i1,A,n].some(Number.isNaN)){show('err','Enter i₁, A, n first.');return}if(n<=1){show('err','n must be > 1');return}
const s1=Math.sin(rad(i1))/n;if(Math.abs(s1)>1){show('err','No real solution at first face.');return}
const r1=deg(Math.asin(s1)),r2=A-r1;if(r2<=0){show('err','Invalid geometry (r₂ <= 0).');return}
const s2=n*Math.sin(rad(r2));if(Math.abs(s2)>1){setv('r1',r1);setv('r2',r2);show('err','Total internal reflection at second face.');return}
const i2=deg(Math.asin(s2)),D=i1+i2-A;setv('r1',r1);setv('r2',r2);setv('i2',i2);setv('D',D);show('ok',`Solved: r₁=${r1.toFixed(2)}°, r₂=${r2.toFixed(2)}°, i₂=${i2.toFixed(2)}°, δ=${D.toFixed(2)}°`)}
function resetAll(){['i1','A','n','r1','r2','i2','D'].forEach(k=>{by(k).value='';by(k).classList.remove('calc')});by('ok').style.display='none';by('err').style.display='none'}
</script></body></html>
